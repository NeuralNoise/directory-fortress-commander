   Licensed to the Apache Software Foundation (ASF) under one
   or more contributor license agreements.  See the NOTICE file
   distributed with this work for additional information
   regarding copyright ownership.  The ASF licenses this file
   to you under the Apache License, Version 2.0 (the
   "License"); you may not use this file except in compliance
   with the License.  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing,
   software distributed under the License is distributed on an
   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
   KIND, either express or implied.  See the License for the
   specific language governing permissions and limitations
   under the License.

# Apache Fortress Web

 Apache Fortress Web Version 1.0-RC41 System Architecture Diagram
 ![Apache Fortress Web System Architecture](images/fortress-web-system-arch.png "Apache Fortress Web System Architecture")

This document contains instructions to download, build, and test operations using Apache Fortress Web component.

-------------------------------------------------------------------------------
## Table of Contents

 * SECTION 1. Prerequisites
 * SECTION 2. Download & Build
 * SECTION 3. Get the fortress.properties
 * SECTION 4. Load Sample Security Policy
 * SECTION 5. Deploy to Tomcat Server
 * SECTION 6. Test with Selenium

-------------------------------------------------------------------------------
## SECTION 1. Prerequisites

Minimum hardware requirements:
 * 2 Cores
 * 4GB RAM

Minimum software requirements:
 * Java SDK 7++
 * git
 * Apache Maven3++
 * Apache Fortress installed per README located in the Apache Fortress Core package.

Everything else covered in steps that follow.  Tested on Debian, Centos & Windows systems.

-------------------------------------------------------------------------------
## SECTION 2. Download & Build

Build the source.
 ```
 git clone https://git-wip-us.apache.org/repos/asf/directory-fortress-commander.git
 cd directory-fortress-commander
 mvn clean install
 ```
___________________________________________________________________________________
## SECTION 3. Get the fortress.properties

Copy the fortress.properties, created during Fortress Core setup, to this package's resource folder.

```
cp [directory-fortress-core]/config/fortress.properties [directory-fortress-commander]/src/main/resources
```

Where [directory-fortress-core] is base folder of the fortress core source package and [directory-fortress-commander] is the current package's home folder.
___________________________________________________________________________________
## SECTION 4. Load Sample Security Policy

Run maven install with load file:
```
mvn install -Dload.file=./src/main/resources/FortressWebDemoUsers.xml
```

___________________________________________________________________________________
## SECTION 5. Deploy to Tomcat Server

1. If Tomcat has global security enabled you must add credentials to pom.xml:

 ```
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>tomcat-maven-plugin</artifactId>
        <version>${version.tomcat.maven.plugin}</version>
        <configuration>
            ...
          <!-- Warning the tomcat manager creds here are for deploying into a demo environment only. -->
          <username>tcmanager</username>
          <password>m@nager123</password>
        </configuration>
      </plugin>
 ```

2. Get the Fortress Realm Proxy jar.

 Place the fortress-realm proxy jar, generated by the [directory-fortress-realm] package into Tomcat server's /lib folder.  The proxy jar name is named fortress-realm-proxy-[version].jar and located here: [directory-fortress-realm]/proxy/target.

3. Restart Tomcat server.

4. Enter maven command to deploy to Tomcat:
 ```
 mvn tomcat:deploy
 ```

5. To redeploy:
 ```
 mvn tomcat:redeploy
 ```
___________________________________________________________________________________
## SECTION 6. Test with Selenium

1. Run the Selenium Web driver integration tests:
 ```
 mvn test -Dtest=FortressWebSeleniumITCase
 ```

Note: This test case depends on:

* Apache Fortress Core *FortressJUnitTest* has been executed.  This will load some test data loaded into the ldap server.

* Sample Fortress Web security policy loaded.

* Firefox is installed to target machine.

___________________________________________________________________________________
#### END OF README